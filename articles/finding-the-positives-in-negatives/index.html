<!doctype html>
<html data-n-head-ssr lang="en" data-n-head="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>Finding the positive in negatives (on film)</title><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="ssr" data-hid="charset" charset="utf-8"><meta data-n-head="ssr" data-hid="mobile-web-app-capable" name="mobile-web-app-capable" content="yes"><meta data-n-head="ssr" data-hid="apple-mobile-web-app-title" name="apple-mobile-web-app-title" content="brotzeit"><meta data-n-head="ssr" data-hid="author" name="author" content="Jan Hettenkofer"><meta data-n-head="ssr" data-hid="og:site_name" name="og:site_name" property="og:site_name" content="brotzeit"><meta data-n-head="ssr" data-hid="description" name="description" content="An excursion into film photography
Back in the days before Instagram in particular and digital photography in general people used little bits of plastic coated with some toxic but oh-so-magical concoction to record images. Over the years, that concoction became less toxic and eventually obsolete, but the magic never quite went away."><meta data-n-head="ssr" data-hid="og:type" property="og:type" content="article"><meta data-n-head="ssr" data-hid="og:url" property="og:url" content=".../finding-the-positives-in-negatives"><meta data-n-head="ssr" data-hid="og:title" property="og:title" content="Finding the positive in negatives (on film) | Brotzeit.engineering"><meta data-n-head="ssr" data-hid="og:description" property="og:description" content="An excursion into film photography
Back in the days before Instagram in particular and digital photography in general people used little bits of plastic coated with some toxic but oh-so-magical concoction to record images. Over the years, that concoction became less toxic and eventually obsolete, but the magic never quite went away."><meta data-n-head="ssr" data-hid="og:image" property="og:image" content="/img/cimetiere_montmartre_three_panels.jpg"><meta data-n-head="ssr" data-hid="twitter:url" name="twitter:url" content=".../finding-the-positives-in-negatives"><meta data-n-head="ssr" data-hid="twitter:title" name="twitter:title" content="Finding the positive in negatives (on film) | Brotzeit.engineering"><meta data-n-head="ssr" data-hid="twitter:description" name="twitter:description" content="An excursion into film photography
Back in the days before Instagram in particular and digital photography in general people used little bits of plastic coated with some toxic but oh-so-magical concoction to record images. Over the years, that concoction became less toxic and eventually obsolete, but the magic never quite went away."><meta data-n-head="ssr" data-hid="twitter:image" name="twitter:image" content="/img/cimetiere_montmartre_three_panels.jpg"><meta data-n-head="ssr" property="article:published_time" content="2019-06-05T00:00:00.000Z"><meta data-n-head="ssr" property="article:modified_time" content="2019-06-05T00:00:00.000Z"><meta data-n-head="ssr" property="article:tag" content="code, photography, colour"><meta data-n-head="ssr" name="twitter:label1" content="Written by"><meta data-n-head="ssr" name="twitter:data1" content="Jan Hettenkofer"><meta data-n-head="ssr" name="twitter:label2" content="Filed under"><meta data-n-head="ssr" name="twitter:data2" content="code, photography, colour"><link data-n-head="ssr" rel="icon" type="image/x-icon" href="/favicon.png"><link data-n-head="ssr" rel="stylesheet" href="https://use.typekit.net/ppe7kgs.css"><link data-n-head="ssr" rel="manifest" href="/_nuxt/manifest.b9659ed1.json" data-hid="manifest"><link data-n-head="ssr" data-hid="canonical" rel="canonical" href="https://brotzeit.engineering/articles/finding-the-positives-in-negatives"><link rel="preload" href="/_nuxt/841cd36.js" as="script"><link rel="preload" href="/_nuxt/bf5dc9a.js" as="script"><link rel="preload" href="/_nuxt/2f04e3d.js" as="script"><link rel="preload" href="/_nuxt/d75b29c.js" as="script"><link rel="preload" href="/_nuxt/133d639.js" as="script"><style data-vue-ssr-id="38dfa7e4:0 4993ad74:0 517a8dd7:0 019e1cef:0 63fac72f:0 b297a46e:0 6d36170f:0">/*! modern-normalize v1.0.0 | MIT License | https://github.com/sindresorhus/modern-normalize */:root{-moz-tab-size:4;-o-tab-size:4;tab-size:4}html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,"Segoe UI",Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji"}hr{height:0;color:inherit}abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace,SFMono-Regular,Consolas,"Liberation Mono",Menlo,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,select{text-transform:none}[type=button],[type=reset],button{-webkit-appearance:button}legend{padding:0}progress{vertical-align:baseline}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}button{background-color:transparent;background-image:none}button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}fieldset,ol,ul{margin:0;padding:0}ol,ul{list-style:none}html{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;line-height:1.5}body{font-family:inherit;line-height:inherit}*,:after,:before{box-sizing:border-box;border:0 solid #374151}hr{border-top-width:1px}img{border-style:solid}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{color:#6b7280}input:-ms-input-placeholder,textarea:-ms-input-placeholder{color:#6b7280}input::-ms-input-placeholder,textarea::-ms-input-placeholder{color:#6b7280}input::placeholder,textarea::placeholder{color:#6b7280}[role=button],button{cursor:pointer}table{border-collapse:collapse}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}button,input,optgroup,select,textarea{padding:0;line-height:inherit;color:inherit}code,kbd,pre,samp{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}.container{width:100%}@media (min-width:640px){.container{max-width:640px}}@media (min-width:768px){.container{max-width:768px}}@media (min-width:1024px){.container{max-width:1024px}}@media (min-width:1280px){.container{max-width:1280px}}@media (min-width:1536px){.container{max-width:1536px}}.prose{color:#fff;max-width:65ch}.prose a{color:#f9fafb;text-decoration:underline;font-weight:500}.prose strong{color:#f9fafb;font-weight:600}.prose ol{counter-reset:list-counter;margin-top:1.25em;margin-bottom:1.25em}.prose ol>li{position:relative;counter-increment:list-counter;padding-left:1.75em}.prose ol>li:before{content:counter(list-counter) ".";position:absolute;font-weight:400;color:#9ca3af;left:0}.prose ul>li{position:relative;padding-left:1.75em}.prose ul>li:before{content:"";position:absolute;background-color:#4b5563;border-radius:50%;width:.375em;height:.375em;top:.6875em;left:.25em}.prose hr{border-color:#374151;border-top-width:1px;margin-top:3em;margin-bottom:3em}.prose blockquote{font-weight:500;font-style:italic;color:#f9fafb;border-left-width:.25rem;border-left-color:#374151;quotes:"\201C""\201D""\2018""\2019";margin-top:1.6em;margin-bottom:1.6em;padding-left:1em}.prose blockquote p:first-of-type:before{content:open-quote}.prose blockquote p:last-of-type:after{content:close-quote}.prose h1{color:#f9fafb;font-weight:800;font-size:2.25em;margin-top:0;margin-bottom:.8888889em;line-height:1.1111111}.prose h2{color:#f9fafb;font-weight:700;font-size:1.5em;margin-top:2em;margin-bottom:1em;line-height:1.3333333}.prose h3{font-size:1.25em;margin-top:1.6em;margin-bottom:.6em;line-height:1.6}.prose h3,.prose h4{color:#f9fafb;font-weight:600}.prose h4{margin-top:1.5em;margin-bottom:.5em;line-height:1.5}.prose figure figcaption{color:#9ca3af;font-size:.875em;line-height:1.4285714;margin-top:.8571429em}.prose code{color:#f9fafb;font-weight:600;font-size:.875em}.prose code:after,.prose code:before{content:"`"}.prose a code{color:#f9fafb}.prose pre{color:#374151;background-color:#f3f4f6;overflow-x:auto;font-size:.875em;line-height:1.7142857;margin-top:1.7142857em;margin-bottom:1.7142857em;border-radius:.375rem;padding:.8571429em 1.1428571em}.prose pre code{background-color:transparent;border-width:0;border-radius:0;padding:0;font-weight:400;color:inherit;font-size:inherit;font-family:inherit;line-height:inherit}.prose pre code:after,.prose pre code:before{content:""}.prose table{width:100%;table-layout:auto;text-align:left;margin-top:2em;margin-bottom:2em;font-size:.875em;line-height:1.7142857}.prose thead{color:#f9fafb;font-weight:600;border-bottom-width:1px;border-bottom-color:#4b5563}.prose thead th{vertical-align:bottom;padding-right:.5714286em;padding-bottom:.5714286em;padding-left:.5714286em}.prose tbody tr{border-bottom-width:1px;border-bottom-color:#374151}.prose tbody tr:last-child{border-bottom-width:0}.prose tbody td{vertical-align:top;padding:.5714286em}.prose{font-size:1rem;line-height:1.75}.prose p{margin-top:1.25em;margin-bottom:1.25em}.prose figure,.prose img,.prose video{margin-top:2em;margin-bottom:2em}.prose figure>*{margin-top:0;margin-bottom:0}.prose h2 code{font-size:.875em}.prose h3 code{font-size:.9em}.prose ul{margin-top:1.25em;margin-bottom:1.25em}.prose li{margin-top:.5em;margin-bottom:.5em}.prose>ul>li p{margin-top:.75em;margin-bottom:.75em}.prose>ul>li>:first-child{margin-top:1.25em}.prose>ul>li>:last-child{margin-bottom:1.25em}.prose>ol>li>:first-child{margin-top:1.25em}.prose>ol>li>:last-child{margin-bottom:1.25em}.prose ol ol,.prose ol ul,.prose ul ol,.prose ul ul{margin-top:.75em;margin-bottom:.75em}.prose h2+*,.prose h3+*,.prose h4+*,.prose hr+*{margin-top:0}.prose thead th:first-child{padding-left:0}.prose thead th:last-child{padding-right:0}.prose tbody td:first-child{padding-left:0}.prose tbody td:last-child{padding-right:0}.prose>:first-child{margin-top:0}.prose>:last-child{margin-bottom:0}.space-y-4>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-top:calc(1rem*(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem*var(--tw-space-y-reverse))}.border{border-width:1px}.block{display:block}.inline{display:inline}.flex{display:flex}.table{display:table}.grid{display:grid}.hidden{display:none}.flex-row{flex-direction:row}.items-center{align-items:center}.justify-center{justify-content:center}.flex-1{flex:1 1 0%}.flex-none{flex:none}.font-serif{font-family:essonnes-text,serif}.font-serif-headline{font-family:essonnes-headline,serif}.font-normal{font-weight:400}.font-bold{font-weight:700}.list-inside{list-style-position:inside}.list-decimal{list-style-type:decimal}.mx-auto{margin-left:auto;margin-right:auto}.min-h-screen{min-height:100vh}.p-4{padding:1rem}.px-4{padding-left:1rem;padding-right:1rem}.pb-4{padding-bottom:1rem}.static{position:static}.fixed{position:fixed}*{--tw-shadow:0 0 transparent;--tw-ring-inset:var(--tw-empty, );/*!*//*!*/--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,0.5);--tw-ring-offset-shadow:0 0 transparent;--tw-ring-shadow:0 0 transparent}.text-center{text-align:center}.italic{font-style:italic}.w-64{width:16rem}.gap-4{grid-gap:1rem;gap:1rem}.gap-12{grid-gap:3rem;gap:3rem}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.col-span-2{grid-column:span 2/span 2}.col-span-3{grid-column:span 3/span 3}.transition{transition-property:background-color,border-color,color,fill,stroke,opacity,box-shadow,transform;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}@-webkit-keyframes spin{to{transform:rotate(1turn)}}@keyframes spin{to{transform:rotate(1turn)}}@-webkit-keyframes ping{75%,to{transform:scale(2);opacity:0}}@keyframes ping{75%,to{transform:scale(2);opacity:0}}@-webkit-keyframes pulse{50%{opacity:.5}}@keyframes pulse{50%{opacity:.5}}@-webkit-keyframes bounce{0%,to{transform:translateY(-25%);-webkit-animation-timing-function:cubic-bezier(.8,0,1,1);animation-timing-function:cubic-bezier(.8,0,1,1)}50%{transform:none;-webkit-animation-timing-function:cubic-bezier(0,0,.2,1);animation-timing-function:cubic-bezier(0,0,.2,1)}}@keyframes bounce{0%,to{transform:translateY(-25%);-webkit-animation-timing-function:cubic-bezier(.8,0,1,1);animation-timing-function:cubic-bezier(.8,0,1,1)}50%{transform:none;-webkit-animation-timing-function:cubic-bezier(0,0,.2,1);animation-timing-function:cubic-bezier(0,0,.2,1)}}@media (min-width:768px){.md\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}}@media (min-width:1024px){.lg\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}}@media (min-width:1280px){.xl\:block{display:block}.xl\:hidden{display:none}.xl\:col-span-1{grid-column:span 1/span 1}.xl\:col-span-2{grid-column:span 2/span 2}}@media (min-width:1536px){.\32xl\:block{display:block}}:root{--spacing-xs:calc(var(--spacing)/4);--spacing-s:calc(var(--spacing)/2);--spacing:16px;--spacing-l:calc(var(--spacing-s) + var(--spacing));--spacing-xl:calc(var(--spacing)*2);--line-width:1px;--base-font-size:16px;--sans-serif-font-stack:-apple-system,BlinkMacSystemFont,"Segoe UI","Roboto","Oxygen","Ubuntu","Cantarell","Fira Sans","Droid Sans","Helvetica Neue",sans-serif;--serif-font-stack:essonnes-text,serif;--serif-headline-font-stack:essonnes-headline,serif;--font-stack:var(--sans-serif-font-stack);--background-dark:#000;--background-light:#fff;--foreground-dark:#fff;--foreground-light:#000;--mid-dark:grey;--mid-light:grey;--mid:var(--mid-dark)}.dark,:root{--background:var(--background-dark);--foreground:var(--foreground-dark)}.light{--background:var(--background-light);--foreground:var(--foreground-light)}body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif;font-family:var(--font-stack);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;color:#fff;color:var(--foreground);background-color:#000;background-color:var(--background);box-sizing:border-box;scroll-behavior:smooth}.bz-serif{--font-stack:var(--serif-font-stack)}.bz-serif h1,.bz-serif h2,.bz-serif h3,.bz-serif h4,.bz-serif h5,.bz-serif h6,h1.bz-serif,h2.bz-serif,h3.bz-serif,h4.bz-serif,h5.bz-serif,h6.bz-serif{font-family:essonnes-headline,serif;font-family:var(--serif-headline-font-stack)}h1{font-size:64px;font-weight:900}h1:not(:first-child){margin-top:64px;margin-top:calc(var(--spacing-xl)*2)}h1:not(:last-child){margin-bottom:32px;margin-bottom:var(--spacing-xl)}h2{font-size:32px;font-weight:900}h2:not(:first-child){margin-top:48px;margin-top:calc(var(--spacing-l)*2)}h2:not(:last-child){margin-bottom:24px;margin-bottom:var(--spacing-l)}h3{font-size:24px;font-weight:900}h3:not(:first-child){margin-top:32px;margin-top:calc(var(--spacing)*2)}h3:not(:last-child){margin-bottom:16px;margin-bottom:var(--spacing)}.bz-serif h3,h3.bz-serif{font-style:italic}h4{font-size:18px;font-weight:900}.bz-serif h4,h4.bz-serif{font-style:italic}h5{font-size:16px;font-weight:900}.bz-serif h5,h5.bz-serif{font-style:italic}h6{font-size:16px;font-weight:600}.bz-serif h6,h6.bz-serif{font-style:italic}p:not(:last-child){margin-bottom:1rem}input:not([type]),input[type=text]{background:0 0;border-bottom:1px solid #fff;border-bottom:solid var(--line-width) var(--foreground);border-radius:0}input:not([type])::-moz-placeholder,input[type=text]::-moz-placeholder{color:#fff;color:var(--foreground);opacity:1;font-weight:200}input:not([type]):-ms-input-placeholder,input[type=text]:-ms-input-placeholder{color:#fff;color:var(--foreground);opacity:1;font-weight:200}input:not([type])::-ms-input-placeholder,input[type=text]::-ms-input-placeholder{color:#fff;color:var(--foreground);opacity:1;font-weight:200}input:not([type])::placeholder,input[type=text]::placeholder{color:#fff;color:var(--foreground);opacity:1;font-weight:200}input:not([type]):focus,input[type=text]:focus{outline:0;border-bottom-width:2px;border-bottom-width:calc(var(--line-width)*2);margin-bottom:-1px;margin-bottom:calc(var(--line-width)*-1)}code[class*=language-],pre[class*=language-]{color:#000;background:0 0;text-shadow:0 1px #fff;font-family:Consolas,Monaco,"Andale Mono","Ubuntu Mono",monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection{text-shadow:none;background:#b3d4fc}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#9a6e3a;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.nuxt-progress{position:fixed;top:0;left:0;right:0;height:2px;width:0;opacity:1;transition:width .1s,opacity .4s;background-color:#fff;z-index:999999}.nuxt-progress.nuxt-progress-notransition{transition:none}.nuxt-progress-failed{background-color:red}#content[data-v-22a83a8a]{max-width:100%}.user-nav[data-v-22a83a8a]{position:fixed;bottom:0}#hamburger[data-v-22a83a8a]{position:fixed;bottom:1rem;right:1rem;z-index:99999}#article-header[data-v-bfdd07ec]{position:relative;margin-bottom:4rem}#header-title[data-v-bfdd07ec]{position:absolute;bottom:0;padding-left:2rem;padding-right:2rem;width:100%}@media screen and (max-width:640px){#article-header[data-v-bfdd07ec]{color:#fff;max-width:65ch}#article-header [class~=lead][data-v-bfdd07ec]{color:#d1d5db;font-size:1.25em;line-height:1.6;margin-top:1.2em;margin-bottom:1.2em}#article-header a[data-v-bfdd07ec]{color:#f9fafb;text-decoration:underline;font-weight:500}#article-header strong[data-v-bfdd07ec]{color:#f9fafb;font-weight:600}#article-header ol[data-v-bfdd07ec]{counter-reset:list-counter;margin-top:1.25em;margin-bottom:1.25em}#article-header ol>li[data-v-bfdd07ec]{position:relative;counter-increment:list-counter;padding-left:1.75em}#article-header ol>li[data-v-bfdd07ec]:before{content:counter(list-counter) ".";position:absolute;font-weight:400;color:#9ca3af;left:0}#article-header ul>li[data-v-bfdd07ec]{position:relative;padding-left:1.75em}#article-header ul>li[data-v-bfdd07ec]:before{content:"";position:absolute;background-color:#4b5563;border-radius:50%;width:.375em;height:.375em;top:.6875em;left:.25em}#article-header hr[data-v-bfdd07ec]{border-color:#374151;border-top-width:1px;margin-top:3em;margin-bottom:3em}#article-header blockquote[data-v-bfdd07ec]{font-weight:500;font-style:italic;color:#f9fafb;border-left-width:.25rem;border-left-color:#374151;quotes:"\201C""\201D""\2018""\2019";margin-top:1.6em;margin-bottom:1.6em;padding-left:1em}#article-header blockquote p[data-v-bfdd07ec]:first-of-type:before{content:open-quote}#article-header blockquote p[data-v-bfdd07ec]:last-of-type:after{content:close-quote}#article-header h1[data-v-bfdd07ec]{color:#f9fafb;font-weight:800;font-size:2.25em;margin-top:0;margin-bottom:.8888889em;line-height:1.1111111}#article-header h2[data-v-bfdd07ec]{color:#f9fafb;font-weight:700;font-size:1.5em;margin-top:2em;margin-bottom:1em;line-height:1.3333333}#article-header h3[data-v-bfdd07ec]{color:#f9fafb;font-weight:600;font-size:1.25em;margin-top:1.6em;margin-bottom:.6em;line-height:1.6}#article-header h4[data-v-bfdd07ec]{color:#f9fafb;font-weight:600;margin-top:1.5em;margin-bottom:.5em;line-height:1.5}#article-header figure figcaption[data-v-bfdd07ec]{color:#9ca3af;font-size:.875em;line-height:1.4285714;margin-top:.8571429em}#article-header code[data-v-bfdd07ec]{color:#f9fafb;font-weight:600;font-size:.875em}#article-header code[data-v-bfdd07ec]:after,#article-header code[data-v-bfdd07ec]:before{content:"`"}#article-header a code[data-v-bfdd07ec]{color:#f9fafb}#article-header pre[data-v-bfdd07ec]{color:#374151;background-color:#f3f4f6;overflow-x:auto;font-size:.875em;line-height:1.7142857;margin-top:1.7142857em;margin-bottom:1.7142857em;border-radius:.375rem;padding:.8571429em 1.1428571em}#article-header pre code[data-v-bfdd07ec]{background-color:transparent;border-width:0;border-radius:0;padding:0;font-weight:400;color:inherit;font-size:inherit;font-family:inherit;line-height:inherit}#article-header pre code[data-v-bfdd07ec]:after,#article-header pre code[data-v-bfdd07ec]:before{content:""}#article-header table[data-v-bfdd07ec]{width:100%;table-layout:auto;text-align:left;margin-top:2em;margin-bottom:2em;font-size:.875em;line-height:1.7142857}#article-header thead[data-v-bfdd07ec]{color:#f9fafb;font-weight:600;border-bottom-width:1px;border-bottom-color:#4b5563}#article-header thead th[data-v-bfdd07ec]{vertical-align:bottom;padding-right:.5714286em;padding-bottom:.5714286em;padding-left:.5714286em}#article-header tbody tr[data-v-bfdd07ec]{border-bottom-width:1px;border-bottom-color:#374151}#article-header tbody tr[data-v-bfdd07ec]:last-child{border-bottom-width:0}#article-header tbody td[data-v-bfdd07ec]{vertical-align:top;padding:.5714286em}#article-header[data-v-bfdd07ec]{font-size:1rem;line-height:1.75}#article-header p[data-v-bfdd07ec]{margin-top:1.25em;margin-bottom:1.25em}#article-header figure[data-v-bfdd07ec],#article-header img[data-v-bfdd07ec],#article-header video[data-v-bfdd07ec]{margin-top:2em;margin-bottom:2em}#article-header figure>[data-v-bfdd07ec]{margin-top:0;margin-bottom:0}#article-header h2 code[data-v-bfdd07ec]{font-size:.875em}#article-header h3 code[data-v-bfdd07ec]{font-size:.9em}#article-header ul[data-v-bfdd07ec]{margin-top:1.25em;margin-bottom:1.25em}#article-header li[data-v-bfdd07ec]{margin-top:.5em;margin-bottom:.5em}#article-header>ul>li p[data-v-bfdd07ec]{margin-top:.75em;margin-bottom:.75em}#article-header>ul>li[data-v-bfdd07ec]>:first-child{margin-top:1.25em}#article-header>ul>li[data-v-bfdd07ec]>:last-child{margin-bottom:1.25em}#article-header>ol>li[data-v-bfdd07ec]>:first-child{margin-top:1.25em}#article-header>ol>li[data-v-bfdd07ec]>:last-child{margin-bottom:1.25em}#article-header ol ol[data-v-bfdd07ec],#article-header ol ul[data-v-bfdd07ec],#article-header ul ol[data-v-bfdd07ec],#article-header ul ul[data-v-bfdd07ec],.prose ol ol[data-v-bfdd07ec],.prose ol ul[data-v-bfdd07ec],.prose ul ol[data-v-bfdd07ec],.prose ul ul[data-v-bfdd07ec]{margin-top:.75em;margin-bottom:.75em}#article-header h2+[data-v-bfdd07ec],#article-header h3+[data-v-bfdd07ec],#article-header h4+[data-v-bfdd07ec],#article-header hr+[data-v-bfdd07ec]{margin-top:0}#article-header thead th[data-v-bfdd07ec]:first-child{padding-left:0}#article-header thead th[data-v-bfdd07ec]:last-child{padding-right:0}#article-header tbody td[data-v-bfdd07ec]:first-child{padding-left:0}#article-header tbody td[data-v-bfdd07ec]:last-child{padding-right:0}#article-header[data-v-bfdd07ec]>:first-child{margin-top:0}#article-header[data-v-bfdd07ec]>:last-child{margin-bottom:0}#article-header img[data-v-bfdd07ec]{margin-top:0}}#header-image[data-v-bfdd07ec]{width:100%}#license-info[data-v-bfdd07ec],article[data-v-bfdd07ec]{margin-bottom:2rem}#license-info[data-v-bfdd07ec]{margin-top:2rem}#license-info p[data-v-bfdd07ec]{opacity:.75;margin-top:.5rem}.bz-hamburger[data-v-2511126a]{position:relative}.hamburger-button[data-v-2511126a]{position:absolute;background-color:var(--foreground);border:solid var(--line-width) var(--background);padding:.25rem;padding-top:calc(var(--spacing-xl)*.25);padding-bottom:calc(var(--spacing-xl)*.25);height:var(--spacing-xl);width:var(--spacing-xl);right:0;bottom:0}.hamburger-button.open[data-v-2511126a]{background-color:var(--background);border-color:var(--foreground)}.hamburger-dash[data-v-2511126a]{background-color:var(--background);width:100%;height:calc(var(--line-width)*2);margin-bottom:calc(25% - var(--line-width))}.hamburger-button.open .hamburger-dash[data-v-2511126a]{background-color:var(--foreground)}.mobile-navigation-container[data-v-2511126a]{position:relative;text-align:right}.mobile-navigation-container .navigation[data-v-2511126a]{background-color:var(--background);border:solid var(--line-width) var(--foreground);padding-bottom:3rem}</style><link rel="preload" href="/_nuxt/static/1611656397/articles/finding-the-positives-in-negatives/payload.js" as="script"><link rel="preload" href="/_nuxt/static/1611656397/manifest.js" as="script">
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><!----><div id="__layout"><div class="dark" data-v-22a83a8a><div id="layout-content" class="container mx-auto flex flex-row" data-v-22a83a8a><div id="left-column" class="flex-none hidden 2xl:block w-64" data-v-22a83a8a></div> <div id="content" class="flex-1 mx-auto px-4 pb-4" data-v-22a83a8a><div data-v-bfdd07ec data-v-22a83a8a><div id="article-header" data-v-bfdd07ec><h1 id="header-title" data-v-bfdd07ec>Finding the positive in negatives (on film)</h1> <img id="header-image" src="/img/cimetiere_montmartre_three_panels.jpg" alt="An excursion into film photography
Back in the days before Instagram in particular and digital photography in general people used little bits of plastic coated with some toxic but oh-so-magical concoction to record images. Over the years, that concoction became less toxic and eventually obsolete, but the magic never quite went away." data-v-bfdd07ec></div> <article class="prose mx-auto" data-v-bfdd07ec><div class="nuxt-content" data-v-bfdd07ec data-v-bfdd07ec><h1 id="an-excursion-into-film-photography" data-v-bfdd07ec data-v-bfdd07ec><a href="#an-excursion-into-film-photography" aria-hidden="true" tabindex="-1" data-v-bfdd07ec data-v-bfdd07ec><span class="icon icon-link" data-v-bfdd07ec data-v-bfdd07ec></span></a>An excursion into film photography</h1>
<p data-v-bfdd07ec data-v-bfdd07ec>Back in the days before Instagram in particular and digital photography in general people used little bits of plastic coated with some toxic but oh-so-magical concoction to record images. Over the years, that concoction became less toxic and eventually obsolete, but the magic never quite went away.</p>

<p data-v-bfdd07ec data-v-bfdd07ec>These days it’s quite popular to shoot film again and I myself enjoy running a roll of Kodak’s finest through my camera from time to time.</p>
<p data-v-bfdd07ec data-v-bfdd07ec>The challenges of analog photography are quite different from what digital throws at you, but one that has vexed me in particular is the hassle of digitising film. Lab scans are either expensive and/or low quality, so they are out for me. If, however, you have ever tried to digitise colour negative film yourself, you will have found that it is all but trivial to get the colours to look right. There is a plethora of articles on subject, some of them excellent, however most conclude that you just have to feel your way through the colour adjustment.</p>
<p data-v-bfdd07ec data-v-bfdd07ec>I don’t accept that. There’s no way generations of photographers and highly trained chemists would have let such an unscientific approach to colour stand for decades.</p>
<blockquote data-v-bfdd07ec data-v-bfdd07ec>
<p data-v-bfdd07ec data-v-bfdd07ec>N.B.: I am not claiming that the solution presented here is superior to manual adjustment by a trained eye. In fact, it probably isn’t, I have not done enough research for that yet.</p>
<p data-v-bfdd07ec data-v-bfdd07ec>This is merely the first step on the way to an accurate negative-positive conversion algorithm. For the moment it may or may not be useful to you as a way to automate parts of your current workflow and it may or may not provide higher quality results than your scanner software’s conversion algorithm.</p>
</blockquote>
<h2 id="a-primer-on-colour-negative-film" data-v-bfdd07ec data-v-bfdd07ec><a href="#a-primer-on-colour-negative-film" aria-hidden="true" tabindex="-1" data-v-bfdd07ec data-v-bfdd07ec><span class="icon icon-link" data-v-bfdd07ec data-v-bfdd07ec></span></a>A primer on colour negative film</h2>
<figure data-v-bfdd07ec data-v-bfdd07ec>
    <img src="/img/test_negative.jpg" alt="A synthetic image showing a black-to-transparent gradient as well as a color spectrum on an orange background" class="mx-auto" data-v-bfdd07ec data-v-bfdd07ec>
    <figcaption data-v-bfdd07ec data-v-bfdd07ec>Modern Art? No, this is the fake “colour negative” I concocted to test the algorithm.</figcaption>
</figure>
<p data-v-bfdd07ec data-v-bfdd07ec>There is plenty of information out there on how colour negative film works and this article is not about that, but here’s a quick rundown for the uninitiated: the plastic base is coated with photosensitive cyan, magenta and yellow dyes (each on their own layer). Since these might have slight impurities in them, the plastic base is coloured orange to mask those imperfections. When printing in a darkroom, the photographer would dial in a combination of colour filters to remove that mask.</p>
<figure data-v-bfdd07ec data-v-bfdd07ec>
    <img src="/img/cimetiere_montmartre_negative.jpg" alt="An untreated digitisation of a colour negative photograph of Cimetiére Montmartre" class="mx-auto" data-v-bfdd07ec data-v-bfdd07ec>
    <figcaption data-v-bfdd07ec data-v-bfdd07ec>This is probably as bad as it gets for real world input data: uneven lighting in both colour and intensity, the file is pre-processed instead of raw, the values are clearly not distributed across the entire range afforded by the format, the film this was taken on is long expired and on top of all that there is some dirt on the negative. Nevertheless, this will serve as our example today.</figcaption>
</figure>
<p data-v-bfdd07ec data-v-bfdd07ec>In addition to the orange base, the negative is also extremely low contrast, the idea being that the film should have more exposure latitude than strictly necessary so that a variety of extremely high contrast scenes can be reproduced naturally. In the darkroom this flat, linear curve would be transformed into a slightly steeper (read: more contrasty) S-curve by use of the appropriate paper and development process.</p>
<p data-v-bfdd07ec data-v-bfdd07ec>If you want to know more, this excellent article talks about the characteristic curve and exposure latitude of colour negative film.</p>
<h2 id="applying-the-darkroom-playbook-to-digital-imaging" data-v-bfdd07ec data-v-bfdd07ec><a href="#applying-the-darkroom-playbook-to-digital-imaging" aria-hidden="true" tabindex="-1" data-v-bfdd07ec data-v-bfdd07ec><span class="icon icon-link" data-v-bfdd07ec data-v-bfdd07ec></span></a>Applying the darkroom playbook to digital imaging</h2>
<p data-v-bfdd07ec data-v-bfdd07ec>At this stage I am going to assume you have a linear scan of your photo to work on (or, better yet, the raw data of whichever sensor you are using).</p>
<p data-v-bfdd07ec data-v-bfdd07ec>The first step is to get rid of the orange base. This is fiddly at best if you do it with the levels tool in Photoshop, but since we are programmers we can do better: no spot on the image should be a lighter colour than a patch of unexposed film. This patch will be exactly the colour of the orange base. It should be white, though.</p>
<p data-v-bfdd07ec data-v-bfdd07ec>In an ideal world we could just include a bit of the films border in our scan and run over all the pixels until we find the lightest. Unfortunately real world sensors introduce noise and since there may be light-coloured dust on the film all bets are off. To get a more reliable value, we take the average of a larger area sampling — either another image containing just the orange base (e.g. taken from the leader of the film) or the average of the lightest patch of pixels. In my implementation I opted for the former.</p>
<p data-v-bfdd07ec data-v-bfdd07ec>Having found the colour of our orange base, we can now scale all pixel values so that the base ends up being white. To maintain the largest possible precision, the image should be exposed so that the orange base is nearly white already (clipped values should be avoided at all cost, though).</p>
<figure data-v-bfdd07ec data-v-bfdd07ec>
    <img src="/img/test_negative_converted.jpg" alt="A synthetic image showing a white-to-transparent gradient as well as a color spectrum on a black background" class="mx-auto" data-v-bfdd07ec data-v-bfdd07ec>
    <figcaption data-v-bfdd07ec data-v-bfdd07ec>This is what the dummy negative looks like after being run through the conversion process. Note that the colours are much more saturated than they would be in a real negative — the test image was designed this way to allow checking for clipping artefacts.</figcaption>
</figure>
<p data-v-bfdd07ec data-v-bfdd07ec>Now that our colours are simply inverted, we can convert the image to a positive by subtracting every pixel value from one. As a final touch we might want to scale the values such that the brightest channel maxes out at exactly one (meaning that pixel values will be contained in the interval ((0, 0, 0), (r_max, g_max, b_max)) such that at least one of r_max, g_max and b_max is exactly equal to one and none of them are larger than one).</p>
<figure data-v-bfdd07ec data-v-bfdd07ec>
    <img src="/img/cimetiere_montmartre_positive.jpg" alt="A positive image derived from the colour negative photograph of Cimetiére Montmartre" class="mx-auto" data-v-bfdd07ec data-v-bfdd07ec>
    <figcaption data-v-bfdd07ec data-v-bfdd07ec>The above image after conversion (left) and after increasing contrast, cropping and some minor colour adjustments in Photoshop (right).</figcaption>
</figure>
<p data-v-bfdd07ec data-v-bfdd07ec>This image will still look rather flat. That’s exactly what we want, though. We can treat this as the raw file which we can use as a base for more creative adjustments.</p>
<h1 id="code" data-v-bfdd07ec data-v-bfdd07ec><a href="#code" aria-hidden="true" tabindex="-1" data-v-bfdd07ec data-v-bfdd07ec><span class="icon icon-link" data-v-bfdd07ec data-v-bfdd07ec></span></a>Code</h1>
<p data-v-bfdd07ec data-v-bfdd07ec>First of all: the orange mask. As discussed above, the colour of the mask might not be a hundred percent homogenous, so we use an area to average over. This is quite simply achieved by applying OpenCV’s mean function:</p>
<div class="nuxt-content-highlight" data-v-bfdd07ec data-v-bfdd07ec><pre class="language-python line-numbers" data-v-bfdd07ec data-v-bfdd07ec><code data-v-bfdd07ec data-v-bfdd07ec><span class="token keyword" data-v-bfdd07ec data-v-bfdd07ec>if</span> args<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>.</span>base<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>:</span>
    base <span class="token operator" data-v-bfdd07ec data-v-bfdd07ec>=</span> cv2<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>.</span>imread<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>(</span>args<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>.</span>base<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>,</span> cv2<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>.</span>IMREAD_UNCHANGED<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>)</span>
    base <span class="token operator" data-v-bfdd07ec data-v-bfdd07ec>=</span> np<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>.</span>float32<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>(</span>base<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>)</span> <span class="token operator" data-v-bfdd07ec data-v-bfdd07ec>/</span> np<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>.</span>iinfo<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>(</span>base<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>.</span>dtype<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>)</span><span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>.</span><span class="token builtin" data-v-bfdd07ec data-v-bfdd07ec>max</span>
    base <span class="token operator" data-v-bfdd07ec data-v-bfdd07ec>=</span> cv2<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>.</span>mean<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>(</span>base<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>)</span>
</code></pre></div>
<p data-v-bfdd07ec data-v-bfdd07ec>If the user doesn’t want to provide a base colour image to form our average from we can also provide a fallback function that searches for the lightest pixel in the image. As was described above this is not ideal, but since it serves only as a fallback, I consider it good enough for this experiment.</p>
<div class="nuxt-content-highlight" data-v-bfdd07ec data-v-bfdd07ec><pre class="language-python line-numbers" data-v-bfdd07ec data-v-bfdd07ec><code data-v-bfdd07ec data-v-bfdd07ec><span class="token keyword" data-v-bfdd07ec data-v-bfdd07ec>def</span> <span class="token function" data-v-bfdd07ec data-v-bfdd07ec>find_base</span><span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>(</span>neg<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>,</span> print_progress<span class="token operator" data-v-bfdd07ec data-v-bfdd07ec>=</span><span class="token boolean" data-v-bfdd07ec data-v-bfdd07ec>False</span><span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>)</span><span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>:</span>
    white_sample <span class="token operator" data-v-bfdd07ec data-v-bfdd07ec>=</span> <span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>[</span><span class="token number" data-v-bfdd07ec data-v-bfdd07ec>0</span><span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>,</span> <span class="token number" data-v-bfdd07ec data-v-bfdd07ec>0</span><span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>]</span>
    previous_max <span class="token operator" data-v-bfdd07ec data-v-bfdd07ec>=</span> <span class="token number" data-v-bfdd07ec data-v-bfdd07ec>0</span>
    
    <span class="token keyword" data-v-bfdd07ec data-v-bfdd07ec>for</span> y <span class="token keyword" data-v-bfdd07ec data-v-bfdd07ec>in</span> <span class="token builtin" data-v-bfdd07ec data-v-bfdd07ec>range</span><span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>(</span>neg<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>.</span>shape<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>[</span><span class="token number" data-v-bfdd07ec data-v-bfdd07ec>1</span><span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>]</span><span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>)</span><span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>:</span>
        <span class="token keyword" data-v-bfdd07ec data-v-bfdd07ec>if</span> print_progress<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>:</span>
            progress <span class="token operator" data-v-bfdd07ec data-v-bfdd07ec>=</span> y<span class="token operator" data-v-bfdd07ec data-v-bfdd07ec>/</span>neg<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>.</span>shape<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>[</span><span class="token number" data-v-bfdd07ec data-v-bfdd07ec>1</span><span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>]</span> <span class="token operator" data-v-bfdd07ec data-v-bfdd07ec>*</span> <span class="token number" data-v-bfdd07ec data-v-bfdd07ec>100</span>
            <span class="token keyword" data-v-bfdd07ec data-v-bfdd07ec>if</span> progress<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>.</span>is_integer<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>(</span><span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>)</span><span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>:</span>
                <span class="token keyword" data-v-bfdd07ec data-v-bfdd07ec>print</span><span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>(</span>
                    ERASE_LINE<span class="token operator" data-v-bfdd07ec data-v-bfdd07ec>+</span><span class="token string-interpolation" data-v-bfdd07ec data-v-bfdd07ec><span class="token string" data-v-bfdd07ec data-v-bfdd07ec>f'Searching for base: </span><span class="token interpolation" data-v-bfdd07ec data-v-bfdd07ec><span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>{</span>progress<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>}</span></span><span class="token string" data-v-bfdd07ec data-v-bfdd07ec> %'</span></span><span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>,</span>
                    end<span class="token operator" data-v-bfdd07ec data-v-bfdd07ec>=</span><span class="token string" data-v-bfdd07ec data-v-bfdd07ec>'\r'</span><span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>)</span><span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>,</span>
        <span class="token keyword" data-v-bfdd07ec data-v-bfdd07ec>for</span> x <span class="token keyword" data-v-bfdd07ec data-v-bfdd07ec>in</span> <span class="token builtin" data-v-bfdd07ec data-v-bfdd07ec>range</span><span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>(</span>neg<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>.</span>shape<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>[</span><span class="token number" data-v-bfdd07ec data-v-bfdd07ec>0</span><span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>]</span><span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>)</span><span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>:</span>
            local_max <span class="token operator" data-v-bfdd07ec data-v-bfdd07ec>=</span> <span class="token number" data-v-bfdd07ec data-v-bfdd07ec>0</span>
            <span class="token keyword" data-v-bfdd07ec data-v-bfdd07ec>for</span> chan <span class="token keyword" data-v-bfdd07ec data-v-bfdd07ec>in</span> <span class="token builtin" data-v-bfdd07ec data-v-bfdd07ec>range</span><span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>(</span>neg<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>.</span>shape<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>[</span><span class="token number" data-v-bfdd07ec data-v-bfdd07ec>2</span><span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>]</span><span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>)</span><span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>:</span>
                local_max <span class="token operator" data-v-bfdd07ec data-v-bfdd07ec>+=</span> neg<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>.</span>item<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>(</span>x<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>,</span> y<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>,</span> chan<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>)</span>
            <span class="token keyword" data-v-bfdd07ec data-v-bfdd07ec>if</span> local_max <span class="token operator" data-v-bfdd07ec data-v-bfdd07ec>></span> previous_max<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>:</span>
                previous_max <span class="token operator" data-v-bfdd07ec data-v-bfdd07ec>=</span> local_max
                white_sample <span class="token operator" data-v-bfdd07ec data-v-bfdd07ec>=</span> <span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>[</span>x<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>,</span> y<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>]</span>
                
    <span class="token keyword" data-v-bfdd07ec data-v-bfdd07ec>return</span> <span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>[</span> neg<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>.</span>item<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>(</span>white_sample<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>[</span><span class="token number" data-v-bfdd07ec data-v-bfdd07ec>0</span><span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>]</span><span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>,</span> white_sample<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>[</span><span class="token number" data-v-bfdd07ec data-v-bfdd07ec>1</span><span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>]</span><span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>,</span> chan<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>)</span>
        <span class="token keyword" data-v-bfdd07ec data-v-bfdd07ec>for</span> chan <span class="token keyword" data-v-bfdd07ec data-v-bfdd07ec>in</span> <span class="token builtin" data-v-bfdd07ec data-v-bfdd07ec>range</span><span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>(</span>neg<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>.</span>shape<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>[</span><span class="token number" data-v-bfdd07ec data-v-bfdd07ec>2</span><span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>]</span><span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>)</span> <span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>]</span>
</code></pre></div>
<blockquote data-v-bfdd07ec data-v-bfdd07ec>
<p data-v-bfdd07ec data-v-bfdd07ec>Almost all the operations used here are traversing the entire image and thus run in O(n), that is linear, time. For large images linear time is rather slow, hence it is advisable to use the average_base procedure with a small-ish source image (I don’t have the impression that OpenCV is making use of parallelisation for these particular operations).</p>
<p data-v-bfdd07ec data-v-bfdd07ec>The find_base function runs even slower than cv2.mean or OpenCV’s mathematical operators since it is implemented entirely in Python. It could probably also be optimised a bit.</p>
</blockquote>
<p data-v-bfdd07ec data-v-bfdd07ec>Once we know what colour the orange mask is, we can use this to white-balance the negative. Afterwards it is simply inverted. Inside the invert function I am also normalising the values to fit the range (0, 1). This is beneficial since at this point we are still working with float data. If we were to save the image as a 16 bit TIFF without scaling the range of values we might lose data that could have otherwise been preserved.</p>
<div class="nuxt-content-highlight" data-v-bfdd07ec data-v-bfdd07ec><pre class="language-python line-numbers" data-v-bfdd07ec data-v-bfdd07ec><code data-v-bfdd07ec data-v-bfdd07ec><span class="token keyword" data-v-bfdd07ec data-v-bfdd07ec>def</span> <span class="token function" data-v-bfdd07ec data-v-bfdd07ec>invert</span><span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>(</span>neg<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>,</span> base<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>,</span> print_progress<span class="token operator" data-v-bfdd07ec data-v-bfdd07ec>=</span><span class="token boolean" data-v-bfdd07ec data-v-bfdd07ec>False</span><span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>)</span><span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>:</span>
    <span class="token keyword" data-v-bfdd07ec data-v-bfdd07ec>if</span> print_progress<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>:</span>
            <span class="token keyword" data-v-bfdd07ec data-v-bfdd07ec>print</span><span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>(</span>
                ERASE_LINE <span class="token operator" data-v-bfdd07ec data-v-bfdd07ec>+</span> <span class="token string" data-v-bfdd07ec data-v-bfdd07ec>'Removing orange mask...'</span><span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>,</span> end<span class="token operator" data-v-bfdd07ec data-v-bfdd07ec>=</span><span class="token string" data-v-bfdd07ec data-v-bfdd07ec>'\r'</span><span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>)</span><span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>,</span>
    
    <span class="token comment" data-v-bfdd07ec data-v-bfdd07ec># remove orange mask</span>
    b<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>,</span>g<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>,</span>r <span class="token operator" data-v-bfdd07ec data-v-bfdd07ec>=</span> cv2<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>.</span>split<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>(</span>neg<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>)</span>
    b <span class="token operator" data-v-bfdd07ec data-v-bfdd07ec>=</span> b <span class="token operator" data-v-bfdd07ec data-v-bfdd07ec>*</span> <span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>(</span><span class="token number" data-v-bfdd07ec data-v-bfdd07ec>1</span> <span class="token operator" data-v-bfdd07ec data-v-bfdd07ec>/</span> base<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>[</span><span class="token number" data-v-bfdd07ec data-v-bfdd07ec>0</span><span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>]</span><span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>)</span>
    g <span class="token operator" data-v-bfdd07ec data-v-bfdd07ec>=</span> g <span class="token operator" data-v-bfdd07ec data-v-bfdd07ec>*</span> <span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>(</span><span class="token number" data-v-bfdd07ec data-v-bfdd07ec>1</span> <span class="token operator" data-v-bfdd07ec data-v-bfdd07ec>/</span> base<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>[</span><span class="token number" data-v-bfdd07ec data-v-bfdd07ec>1</span><span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>]</span><span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>)</span>
    r <span class="token operator" data-v-bfdd07ec data-v-bfdd07ec>=</span> r <span class="token operator" data-v-bfdd07ec data-v-bfdd07ec>*</span> <span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>(</span><span class="token number" data-v-bfdd07ec data-v-bfdd07ec>1</span> <span class="token operator" data-v-bfdd07ec data-v-bfdd07ec>/</span> base<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>[</span><span class="token number" data-v-bfdd07ec data-v-bfdd07ec>2</span><span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>]</span><span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>)</span>
    res <span class="token operator" data-v-bfdd07ec data-v-bfdd07ec>=</span> cv2<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>.</span>merge<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>(</span><span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>(</span>b<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>,</span>g<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>,</span>r<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>)</span><span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>)</span>
    
    <span class="token keyword" data-v-bfdd07ec data-v-bfdd07ec>if</span> print_progress<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>:</span>
            <span class="token keyword" data-v-bfdd07ec data-v-bfdd07ec>print</span><span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>(</span>
                ERASE_LINE <span class="token operator" data-v-bfdd07ec data-v-bfdd07ec>+</span> <span class="token string" data-v-bfdd07ec data-v-bfdd07ec>'Inverting...'</span><span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>,</span> end<span class="token operator" data-v-bfdd07ec data-v-bfdd07ec>=</span><span class="token string" data-v-bfdd07ec data-v-bfdd07ec>'\r'</span><span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>)</span><span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>,</span>
    
    <span class="token comment" data-v-bfdd07ec data-v-bfdd07ec># invert</span>
    res <span class="token operator" data-v-bfdd07ec data-v-bfdd07ec>=</span> <span class="token number" data-v-bfdd07ec data-v-bfdd07ec>1</span> <span class="token operator" data-v-bfdd07ec data-v-bfdd07ec>-</span> res
    
    <span class="token keyword" data-v-bfdd07ec data-v-bfdd07ec>if</span> print_progress<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>:</span>
            <span class="token keyword" data-v-bfdd07ec data-v-bfdd07ec>print</span><span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>(</span>
                ERASE_LINE <span class="token operator" data-v-bfdd07ec data-v-bfdd07ec>+</span> <span class="token string" data-v-bfdd07ec data-v-bfdd07ec>'Normalizing...'</span><span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>,</span> end<span class="token operator" data-v-bfdd07ec data-v-bfdd07ec>=</span><span class="token string" data-v-bfdd07ec data-v-bfdd07ec>'\r'</span><span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>)</span><span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>,</span>

    res <span class="token operator" data-v-bfdd07ec data-v-bfdd07ec>=</span> cv2<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>.</span>normalize<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>(</span>res<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>,</span> <span class="token boolean" data-v-bfdd07ec data-v-bfdd07ec>None</span><span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>,</span> <span class="token number" data-v-bfdd07ec data-v-bfdd07ec>0.0</span><span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>,</span> <span class="token number" data-v-bfdd07ec data-v-bfdd07ec>1.0</span><span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>,</span> cv2<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>.</span>NORM_MINMAX<span class="token punctuation" data-v-bfdd07ec data-v-bfdd07ec>)</span>
    
    <span class="token keyword" data-v-bfdd07ec data-v-bfdd07ec>return</span> res
</code></pre></div>
<p data-v-bfdd07ec data-v-bfdd07ec>You can find the entire program on my GitHub: <a href="https://github.com/JanHett/proto-alchemist" rel="nofollow noopener noreferrer" target="_blank" data-v-bfdd07ec data-v-bfdd07ec>https://github.com/JanHett/proto-alchemist</a>. This implementation will probably evolve, so if you are reading this in the future, do check over there for an up-to-date implementation.</p>
<h1 id="discussing-the-results" data-v-bfdd07ec data-v-bfdd07ec><a href="#discussing-the-results" aria-hidden="true" tabindex="-1" data-v-bfdd07ec data-v-bfdd07ec><span class="icon icon-link" data-v-bfdd07ec data-v-bfdd07ec></span></a>Discussing the results</h1>
<figure data-v-bfdd07ec data-v-bfdd07ec>
    <img src="/img/parc_bercy.jpg" alt="A colour corrected photograph of a building near Parc de Bercy" class="mx-auto" data-v-bfdd07ec data-v-bfdd07ec>
    <figcaption data-v-bfdd07ec data-v-bfdd07ec>Mamiya RZ67, Apo-Sekor Z 210mm f/4.5, Kodak Ektar 100 (expired in 2016)</figcaption>
</figure>
<p data-v-bfdd07ec data-v-bfdd07ec>It is hard to judge the accuracy of this program objectively. The photograph shown above and the previously treated image were both digitised under less than perfect conditions: the backlight was provided by an iPad, the camera was set up on a shaky tripod and the lenses used (a Sony FE 55mm f/1.8 and a Zeiss Planar 85mm f/1.4 ZF) are entirely unsuited for reproduction photography. As noted below the images, they were also taken on expired film (which was not refrigerated for most of its life), hence even a perfect digitisation would probably exhibit strong discolouration.</p>
<p data-v-bfdd07ec data-v-bfdd07ec>That being said, I do think that the resulting positives are rather promising, though. To get comparable colours would have required much tweaking in most scanning software.</p>
<p data-v-bfdd07ec data-v-bfdd07ec>I have not yet tried the algorithm on a real world photograph of a calibration target. This would allow me to actually measure the deviation from the “correct” outcome. True to the statement made in the introduction, I do intend to do this once some of the problems of the current program are ironed out.</p>
<hr data-v-bfdd07ec data-v-bfdd07ec>
<p data-v-bfdd07ec data-v-bfdd07ec>While the algorithm described here seems to work well enough, I have blatantly ignored a host of issues so far. Here’s just a partial list:</p>
<ul data-v-bfdd07ec data-v-bfdd07ec>
<li data-v-bfdd07ec data-v-bfdd07ec>Gamma</li>
<li data-v-bfdd07ec data-v-bfdd07ec>Colour space</li>
<li data-v-bfdd07ec data-v-bfdd07ec>Raw conversion</li>
</ul>
<p data-v-bfdd07ec data-v-bfdd07ec>The problems are not even limited to the digital realm, here are a few that need to be addressed in my capture setup:</p>
<ul data-v-bfdd07ec data-v-bfdd07ec>
<li data-v-bfdd07ec data-v-bfdd07ec>Sensor characteristics (specifically calibration)</li>
<li data-v-bfdd07ec data-v-bfdd07ec>Lens characteristics</li>
<li data-v-bfdd07ec data-v-bfdd07ec>CRI, evenness and stability of the light source</li>
</ul>
<p data-v-bfdd07ec data-v-bfdd07ec>Some of these points are quietly solved by OpenCV or my raw processor (Phase One’s Capture One) but the fact of it is that many loose ends remain.</p>
<h1 id="next-steps" data-v-bfdd07ec data-v-bfdd07ec><a href="#next-steps" aria-hidden="true" tabindex="-1" data-v-bfdd07ec data-v-bfdd07ec><span class="icon icon-link" data-v-bfdd07ec data-v-bfdd07ec></span></a>Next Steps</h1>
<p data-v-bfdd07ec data-v-bfdd07ec>Since my program runs multiple linear-time operations, it can get rather slow for large images. This could be sped up if we were to parallelise these operations. Additionally I would like to allow reading raw files to avoid having the additional, lossy step of raw conversion before I can run my program.</p>
<p data-v-bfdd07ec data-v-bfdd07ec>I am also experimenting with an idea for automatic dust-removal using polarised light and inpainting algorithms.</p>
<p data-v-bfdd07ec data-v-bfdd07ec>If you spot an error in my research or my code, please let me know.</p></div></article> <hr data-v-bfdd07ec> <div id="license-info" data-v-bfdd07ec><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" data-v-bfdd07ec><img alt="Creative Commons Licence" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" style="border-width:0" data-v-bfdd07ec></a> <p data-v-bfdd07ec>
            This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" data-v-bfdd07ec>Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a>.
        </p></div></div></div> <div id="desktop-navigation-container" class="flex-none hidden xl:block w-64" data-v-22a83a8a><ul id="navigation" class="user-nav p-4" data-v-22a83a8a><li data-v-22a83a8a><h3 data-v-22a83a8a><a href="/" class="nuxt-link-active" data-v-22a83a8a>Home</a></h3></li><li data-v-22a83a8a><h3 data-v-22a83a8a><a href="/about" data-v-22a83a8a>What is Brotzeit?</a></h3></li></ul></div></div> <div id="hamburger" class="bz-hamburger block xl:hidden" data-v-2511126a data-v-22a83a8a><!----> <button class="hamburger-button" data-v-2511126a><div class="hamburger-dash" data-v-2511126a></div> <div class="hamburger-dash" data-v-2511126a></div> <div class="hamburger-dash" data-v-2511126a></div></button></div></div></div></div><script>window.__NUXT__={staticAssetsBase:"/_nuxt/static/1611656397",layout:"default",error:null,serverRendered:!0,routePath:"/articles/finding-the-positives-in-negatives",config:{content:{dbHash:"d175bc17"}}}</script><script src="/_nuxt/841cd36.js" defer></script><script src="/_nuxt/133d639.js" defer></script><script src="/_nuxt/bf5dc9a.js" defer></script><script src="/_nuxt/2f04e3d.js" defer></script><script src="/_nuxt/d75b29c.js" defer></script>
  </body>
</html>
